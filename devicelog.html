<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Log</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f8f9fa;
        }
        h1 {
            text-align: center;
            color: #343a40;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #dee2e6;
            background-color: #ffffff;
            margin: 0 5px;
            border-radius: 5px;
        }
        .tab.active {
            background-color: #007bff;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        textarea, input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
            border: 1px solid #ced4da;
            border-radius: 5px;
        }
        button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .log {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .log ul {
            list-style-type: none;
            padding: 0;
        }
        .log li {
            background: #ffffff;
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ced4da;
        }
    </style>
</head>
<body>
    <h1>Device Log</h1>

    <div class="tabs">
        <div class="tab active" onclick="showTab('scanner')">Scanner Input</div>
        <div class="tab" onclick="showTab('manual')">Manual Input</div>
    </div>

    <div id="scanner" class="tab-content active">
        <label for="device">Scan Device ID:</label>
        <input type="text" id="device" placeholder="Scan Device ID (e.g., AATC405593)">
        <label for="employee">Scan Employee Badge:</label>
        <input type="text" id="employee" placeholder="Scan Employee Badge (e.g., EMP 265769AA01)">
        <button onclick="formatAndLogData('scanner')">Format and Log</button>
    </div>

    <div id="manual" class="tab-content">
        <label for="manual-device">Enter Device ID:</label>
        <input type="text" id="manual-device" placeholder="Enter Device ID (e.g., AATC405593)">
        <label for="manual-employee">Enter Employee Number:</label>
        <input type="text" id="manual-employee" placeholder="Enter Employee Number (e.g., 265769)">
        <button onclick="formatAndLogData('manual')">Format and Log</button>
    </div>

    <div class="log" id="log">
        <strong>Formatted Output Log:</strong>
        <ul id="log-list"></ul>
        <button onclick="copyLog()">Copy All</button>
    </div>

    <script>
        function showTab(tabId) {
            // Hide all tab content
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Deactivate all tabs
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));

            // Show the selected tab content and activate the tab
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab.${tabId === 'scanner' ? 'active' : ''}`).classList.add('active');
        }

        function formatAndLogData(source) {
            let deviceInput, employeeInput;

            if (source === 'scanner') {
                // Get inputs from scanner tab
                deviceInput = document.getElementById('device').value.trim();
                employeeInput = document.getElementById('employee').value.trim();
                // Extract numeric part of employee badge
                employeeInput = employeeInput.match(/\d+/) ? employeeInput.match(/\d+/)[0] : '';
            } else if (source === 'manual') {
                // Get inputs from manual tab
                deviceInput = document.getElementById('manual-device').value.trim();
                employeeInput = document.getElementById('manual-employee').value.trim();
            }

            // Validate inputs
            if (!deviceInput || !employeeInput) {
                alert('Please provide valid inputs for both fields!');
                return;
            }

            // Format data
            const formattedData = `${deviceInput}/${employeeInput}`;

            // Log formatted data
            const logList = document.getElementById('log-list');
            const newLogItem = document.createElement('li');
            newLogItem.textContent = formattedData;
            logList.appendChild(newLogItem);

            // Clear inputs for next entry
            if (source === 'scanner') {
                document.getElementById('device').value = '';
                document.getElementById('employee').value = '';
            } else if (source === 'manual') {
                document.getElementById('manual-device').value = '';
                document.getElementById('manual-employee').value = '';
            }
        }

        function copyLog() {
            // Get all log items
            const logItems = document.querySelectorAll('#log-list li');
            let logText = '';
            logItems.forEach(item => {
                logText += item.textContent + '\n';
            });

            // Copy to clipboard
            navigator.clipboard.writeText(logText).then(() => {
                alert('Log copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy log. Please try again.');
            });
        }
    </script>
</body>
</html>
